{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danrley\\\\Documents\\\\ViniVeta\\\\UC7-main\\\\frontend\\\\src\\\\Components\\\\UsuarioInformacoes\\\\UsuarioInfo.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { AutenticadoContexto } from \"../../Contexts/authContexts\"; // Ajuste o caminho se necessário\nimport { Link, useNavigate } from \"react-router-dom\"; // Importe useNavigate\nimport apiLocal from \"../../services/api\"; // Ajuste o caminho se necessário\nimport { toast } from \"react-toastify\";\nimport fotoPerfil from '../../image/foto-perfil.png'; // Ajuste o caminho se necessário\n// Importe seu CSS aqui se necessário\n// import './UsuariosInfo.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UsuariosInfo() {\n  _s();\n  var _dadosUsuarios$idade;\n  const [dadosUsuarios, setDadosUsuarios] = useState(null);\n  const [fotoUrl, setFotoUrl] = useState(fotoPerfil); // URL da imagem a ser exibida\n  const [novaFoto, setNovaFoto] = useState(null); // Arquivo da nova foto selecionada (File object)\n  const [loading, setLoading] = useState(false); // Para indicar carregamento inicial e de upload\n  const [uploading, setUploading] = useState(false); // Específico para o processo de upload\n  const [error, setError] = useState(null); // Para mensagens de erro\n\n  const {\n    usuarioId\n  } = useContext(AutenticadoContexto);\n  const navigate = useNavigate(); // Hook para navegação programática\n\n  // Ref para guardar a URL do objeto de preview e revogá-la depois\n  const objectUrlRef = useRef(null);\n\n  // Efeito para buscar dados do usuário ao montar o componente ou quando usuarioId mudar\n  useEffect(() => {\n    async function consultarDadosUsuarios() {\n      if (!usuarioId) return; // Não fazer nada se não houver ID\n\n      setLoading(true); // Inicia carregamento inicial\n      setError(null);\n      try {\n        var _resposta$data;\n        const resposta = await apiLocal.get(`/ConsultarUsuariosUnico/${usuarioId}`);\n        setDadosUsuarios(resposta.data);\n\n        // Define a URL da foto inicial (do banco ou padrão)\n        setFotoUrl((_resposta$data = resposta.data) !== null && _resposta$data !== void 0 && _resposta$data.banner ? `/files/${resposta.data.banner}` : fotoPerfil);\n      } catch (err) {\n        console.error(\"Erro ao buscar dados do usuário:\", err);\n        toast.error('Erro ao buscar dados do usuário.');\n        setError(\"Não foi possível carregar os dados do usuário.\");\n      } finally {\n        setLoading(false); // Termina carregamento inicial\n      }\n    }\n    consultarDadosUsuarios();\n\n    // Função de limpeza para revogar URL do objeto ao desmontar\n    return () => {\n      if (objectUrlRef.current) {\n        URL.revokeObjectURL(objectUrlRef.current);\n        objectUrlRef.current = null;\n      }\n    };\n  }, [usuarioId]); // Dependência: busca novamente se o usuarioId mudar\n\n  // Função chamada quando o input de arquivo muda\n  const handleFotoPerfilChange = event => {\n    const file = event.target.files[0];\n\n    // Revoga a URL do objeto anterior, se existir\n    if (objectUrlRef.current) {\n      URL.revokeObjectURL(objectUrlRef.current);\n      objectUrlRef.current = null;\n    }\n    if (file && file.type.startsWith('image/')) {\n      setNovaFoto(file); // Guarda o arquivo selecionado\n\n      // Cria uma URL de objeto para preview e guarda a referência\n      objectUrlRef.current = URL.createObjectURL(file);\n      setFotoUrl(objectUrlRef.current); // Atualiza a imagem exibida para o preview\n    } else {\n      // Se nenhum arquivo for selecionado ou o tipo for inválido, reseta\n      setNovaFoto(null);\n      // Volta para a imagem atual do usuário ou a padrão\n      setFotoUrl(dadosUsuarios !== null && dadosUsuarios !== void 0 && dadosUsuarios.banner ? `/files/${dadosUsuarios.banner}` : fotoPerfil);\n      if (file) {\n        // Se um arquivo foi selecionado mas era inválido\n        toast.warn(\"Por favor, selecione um arquivo de imagem válido (jpeg, png, etc).\");\n      }\n    }\n  };\n\n  // Função chamada ao enviar o formulário de upload\n  const handleEnviarFotoPerfil = async event => {\n    event.preventDefault(); // Impede o envio padrão do formulário\n    setError(null);\n    if (!novaFoto) {\n      toast.warn(\"Nenhuma nova foto selecionada para enviar.\");\n      setError(\"Selecione uma foto de perfil para enviar.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', novaFoto); // Adiciona o arquivo ao FormData com a chave 'file'\n\n    setUploading(true); // Inicia indicador de upload\n\n    try {\n      // Faz a requisição PUT para o backend\n      const resposta = await apiLocal.put(`/AlterarDadosUsuarios/${usuarioId}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n          // Authorization header é adicionado automaticamente pelo interceptor do axios, se configurado.\n          // Se não, adicione manualmente: Authorization: `Bearer ${token}` (obtenha o token do contexto)\n        }\n      });\n\n      // --- SUCESSO NO UPLOAD ---\n      console.log('API Response (Upload Success):', resposta.data);\n      const novoNomeBanner = resposta.data.banner; // Pega o nome do arquivo da resposta\n\n      if (!novoNomeBanner) {\n        throw new Error(\"Resposta da API não incluiu o nome do banner atualizado.\");\n      }\n      const novaUrlImagem = `/files/${novoNomeBanner}`;\n      console.log('New image URL to set:', novaUrlImagem);\n\n      // Atualiza o estado com os novos dados\n      setDadosUsuarios(prevDados => ({\n        ...prevDados,\n        banner: novoNomeBanner // Atualiza o nome do banner nos dados locais do usuário\n      }));\n      setFotoUrl(novaUrlImagem); // ATUALIZA A URL DA IMAGEM EXIBIDA\n\n      setNovaFoto(null); // Limpa a seleção de nova foto\n      toast.success(\"Foto de perfil atualizada com sucesso!\");\n\n      // Limpa a URL do objeto de preview que não é mais necessária\n      if (objectUrlRef.current) {\n        URL.revokeObjectURL(objectUrlRef.current);\n        objectUrlRef.current = null;\n      }\n    } catch (error) {\n      console.error(\"Erro ao enviar foto:\", error);\n      toast.error(\"Erro ao enviar a foto de perfil. Verifique o console para detalhes.\");\n      setError(\"Erro ao enviar a foto de perfil.\");\n      // Opcional: reverter a URL da imagem se o upload falhar?\n      // setFotoUrl(dadosUsuarios?.banner ? `/files/${dadosUsuarios.banner}` : fotoPerfil);\n    } finally {\n      setUploading(false); // Termina indicador de upload\n      // Limpa o valor do input de arquivo para permitir selecionar o mesmo arquivo novamente, se necessário\n      event.target.reset(); // Reseta o formulário (que contém o input file)\n    }\n  };\n\n  // --- RENDERIZAÇÃO ---\n\n  // Exibe estado de carregamento inicial\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Carregando dados do perfil...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Exibe erro de carregamento inicial\n  if (error && !dadosUsuarios) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }, this);\n  }\n\n  // Se não houver dados do usuário (mesmo sem erro), exibe mensagem\n  if (!dadosUsuarios) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"N\\xE3o foi poss\\xEDvel carregar as informa\\xE7\\xF5es do perfil.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Formata a data de criação (apenas se existir)\n  const dataFormatada = dadosUsuarios.create_at ? new Date(dadosUsuarios.create_at).toLocaleDateString(\"pt-BR\", {\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\"\n  }) : 'Data não disponível';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box-perfil-principal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-perfil\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-perfil-foto\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: fotoUrl // Controlado pelo estado fotoUrl\n            ,\n            alt: \"Foto de perfil\",\n            style: {\n              width: '100px',\n              height: '100px',\n              borderRadius: '50%',\n              objectFit: 'cover'\n            },\n            onError: e => {\n              // Se a imagem der erro ao carregar (ex: arquivo deletado), volta para a padrão\n              console.warn(`Erro ao carregar imagem: ${fotoUrl}. Voltando para padrão.`);\n              e.target.src = fotoPerfil;\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleEnviarFotoPerfil,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"upload-foto\",\n              className: \"botao-upload-foto\",\n              children: uploading ? \"Enviando...\" : \"Selecionar Foto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"upload-foto\",\n              type: \"file\",\n              accept: \"image/*\" // Aceita qualquer tipo de imagem\n              ,\n              onChange: handleFotoPerfilChange,\n              style: {\n                display: 'none'\n              } // Input fica escondido\n              ,\n              disabled: uploading // Desabilita enquanto envia\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 29\n            }, this), novaFoto && /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"botao-enviar-foto\",\n              disabled: uploading,\n              children: uploading ? \"Enviando...\" : \"Enviar Nova Foto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: 'red',\n              marginTop: '10px'\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-perfil-nome\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: dadosUsuarios.nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: dadosUsuarios.sobrenome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"box-perfil-lista\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"E-mail: \", dadosUsuarios.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Idade: \", (_dadosUsuarios$idade = dadosUsuarios.idade) !== null && _dadosUsuarios$idade !== void 0 ? _dadosUsuarios$idade : \"Não informada\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"G\\xEAnero: \", dadosUsuarios.genero]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Membro desde: \", dataFormatada]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"box-perfil-button-voltar-editar\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/EditarUsuarios/${usuarioId}`),\n          disabled: uploading,\n          children: \"Editar Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 9\n  }, this);\n}\n_s(UsuariosInfo, \"zJRmxdKIK6/BuzEFaJBRUXb7nLY=\", false, function () {\n  return [useNavigate];\n});\n_c = UsuariosInfo;\nvar _c;\n$RefreshReg$(_c, \"UsuariosInfo\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","AutenticadoContexto","Link","useNavigate","apiLocal","toast","fotoPerfil","jsxDEV","_jsxDEV","UsuariosInfo","_s","_dadosUsuarios$idade","dadosUsuarios","setDadosUsuarios","fotoUrl","setFotoUrl","novaFoto","setNovaFoto","loading","setLoading","uploading","setUploading","error","setError","usuarioId","navigate","objectUrlRef","consultarDadosUsuarios","_resposta$data","resposta","get","data","banner","err","console","current","URL","revokeObjectURL","handleFotoPerfilChange","event","file","target","files","type","startsWith","createObjectURL","warn","handleEnviarFotoPerfil","preventDefault","formData","FormData","append","put","headers","log","novoNomeBanner","Error","novaUrlImagem","prevDados","success","reset","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","dataFormatada","create_at","Date","toLocaleDateString","day","month","year","className","src","alt","width","height","borderRadius","objectFit","onError","e","onSubmit","htmlFor","id","accept","onChange","display","disabled","marginTop","nome","sobrenome","email","idade","genero","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Danrley/Documents/ViniVeta/UC7-main/frontend/src/Components/UsuarioInformacoes/UsuarioInfo.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\r\nimport { AutenticadoContexto } from \"../../Contexts/authContexts\"; // Ajuste o caminho se necessário\r\nimport { Link, useNavigate } from \"react-router-dom\"; // Importe useNavigate\r\nimport apiLocal from \"../../services/api\"; // Ajuste o caminho se necessário\r\nimport { toast } from \"react-toastify\";\r\nimport fotoPerfil from '../../image/foto-perfil.png'; // Ajuste o caminho se necessário\r\n// Importe seu CSS aqui se necessário\r\n// import './UsuariosInfo.css';\r\n\r\nexport default function UsuariosInfo() {\r\n    const [dadosUsuarios, setDadosUsuarios] = useState(null);\r\n    const [fotoUrl, setFotoUrl] = useState(fotoPerfil); // URL da imagem a ser exibida\r\n    const [novaFoto, setNovaFoto] = useState(null); // Arquivo da nova foto selecionada (File object)\r\n    const [loading, setLoading] = useState(false); // Para indicar carregamento inicial e de upload\r\n    const [uploading, setUploading] = useState(false); // Específico para o processo de upload\r\n    const [error, setError] = useState(null); // Para mensagens de erro\r\n\r\n    const { usuarioId } = useContext(AutenticadoContexto);\r\n    const navigate = useNavigate(); // Hook para navegação programática\r\n\r\n    // Ref para guardar a URL do objeto de preview e revogá-la depois\r\n    const objectUrlRef = useRef(null);\r\n\r\n    // Efeito para buscar dados do usuário ao montar o componente ou quando usuarioId mudar\r\n    useEffect(() => {\r\n        async function consultarDadosUsuarios() {\r\n            if (!usuarioId) return; // Não fazer nada se não houver ID\r\n\r\n            setLoading(true); // Inicia carregamento inicial\r\n            setError(null);\r\n            try {\r\n                const resposta = await apiLocal.get(`/ConsultarUsuariosUnico/${usuarioId}`);\r\n                setDadosUsuarios(resposta.data);\r\n\r\n                // Define a URL da foto inicial (do banco ou padrão)\r\n                setFotoUrl(resposta.data?.banner ? `/files/${resposta.data.banner}` : fotoPerfil);\r\n\r\n            } catch (err) {\r\n                console.error(\"Erro ao buscar dados do usuário:\", err);\r\n                toast.error('Erro ao buscar dados do usuário.');\r\n                setError(\"Não foi possível carregar os dados do usuário.\");\r\n            } finally {\r\n                setLoading(false); // Termina carregamento inicial\r\n            }\r\n        }\r\n\r\n        consultarDadosUsuarios();\r\n\r\n        // Função de limpeza para revogar URL do objeto ao desmontar\r\n        return () => {\r\n            if (objectUrlRef.current) {\r\n                URL.revokeObjectURL(objectUrlRef.current);\r\n                objectUrlRef.current = null;\r\n            }\r\n        };\r\n    }, [usuarioId]); // Dependência: busca novamente se o usuarioId mudar\r\n\r\n    // Função chamada quando o input de arquivo muda\r\n    const handleFotoPerfilChange = (event) => {\r\n        const file = event.target.files[0];\r\n\r\n        // Revoga a URL do objeto anterior, se existir\r\n        if (objectUrlRef.current) {\r\n            URL.revokeObjectURL(objectUrlRef.current);\r\n            objectUrlRef.current = null;\r\n        }\r\n\r\n        if (file && file.type.startsWith('image/')) {\r\n            setNovaFoto(file); // Guarda o arquivo selecionado\r\n\r\n            // Cria uma URL de objeto para preview e guarda a referência\r\n            objectUrlRef.current = URL.createObjectURL(file);\r\n            setFotoUrl(objectUrlRef.current); // Atualiza a imagem exibida para o preview\r\n        } else {\r\n            // Se nenhum arquivo for selecionado ou o tipo for inválido, reseta\r\n            setNovaFoto(null);\r\n            // Volta para a imagem atual do usuário ou a padrão\r\n            setFotoUrl(dadosUsuarios?.banner ? `/files/${dadosUsuarios.banner}` : fotoPerfil);\r\n            if (file) { // Se um arquivo foi selecionado mas era inválido\r\n                toast.warn(\"Por favor, selecione um arquivo de imagem válido (jpeg, png, etc).\");\r\n            }\r\n        }\r\n    };\r\n\r\n    // Função chamada ao enviar o formulário de upload\r\n    const handleEnviarFotoPerfil = async (event) => {\r\n        event.preventDefault(); // Impede o envio padrão do formulário\r\n        setError(null);\r\n\r\n        if (!novaFoto) {\r\n            toast.warn(\"Nenhuma nova foto selecionada para enviar.\");\r\n            setError(\"Selecione uma foto de perfil para enviar.\");\r\n            return;\r\n        }\r\n\r\n        const formData = new FormData();\r\n        formData.append('file', novaFoto); // Adiciona o arquivo ao FormData com a chave 'file'\r\n\r\n        setUploading(true); // Inicia indicador de upload\r\n\r\n        try {\r\n            // Faz a requisição PUT para o backend\r\n            const resposta = await apiLocal.put(`/AlterarDadosUsuarios/${usuarioId}`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    // Authorization header é adicionado automaticamente pelo interceptor do axios, se configurado.\r\n                    // Se não, adicione manualmente: Authorization: `Bearer ${token}` (obtenha o token do contexto)\r\n                },\r\n            });\r\n\r\n            // --- SUCESSO NO UPLOAD ---\r\n            console.log('API Response (Upload Success):', resposta.data);\r\n\r\n            const novoNomeBanner = resposta.data.banner; // Pega o nome do arquivo da resposta\r\n\r\n            if (!novoNomeBanner) {\r\n                 throw new Error(\"Resposta da API não incluiu o nome do banner atualizado.\");\r\n            }\r\n\r\n            const novaUrlImagem = `/files/${novoNomeBanner}`;\r\n            console.log('New image URL to set:', novaUrlImagem);\r\n\r\n            // Atualiza o estado com os novos dados\r\n            setDadosUsuarios(prevDados => ({\r\n                ...prevDados,\r\n                banner: novoNomeBanner // Atualiza o nome do banner nos dados locais do usuário\r\n            }));\r\n            setFotoUrl(novaUrlImagem); // ATUALIZA A URL DA IMAGEM EXIBIDA\r\n\r\n            setNovaFoto(null); // Limpa a seleção de nova foto\r\n            toast.success(\"Foto de perfil atualizada com sucesso!\");\r\n\r\n            // Limpa a URL do objeto de preview que não é mais necessária\r\n            if (objectUrlRef.current) {\r\n                URL.revokeObjectURL(objectUrlRef.current);\r\n                objectUrlRef.current = null;\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Erro ao enviar foto:\", error);\r\n            toast.error(\"Erro ao enviar a foto de perfil. Verifique o console para detalhes.\");\r\n            setError(\"Erro ao enviar a foto de perfil.\");\r\n             // Opcional: reverter a URL da imagem se o upload falhar?\r\n             // setFotoUrl(dadosUsuarios?.banner ? `/files/${dadosUsuarios.banner}` : fotoPerfil);\r\n        } finally {\r\n            setUploading(false); // Termina indicador de upload\r\n            // Limpa o valor do input de arquivo para permitir selecionar o mesmo arquivo novamente, se necessário\r\n             event.target.reset(); // Reseta o formulário (que contém o input file)\r\n        }\r\n    };\r\n\r\n    // --- RENDERIZAÇÃO ---\r\n\r\n    // Exibe estado de carregamento inicial\r\n    if (loading) {\r\n        return <p>Carregando dados do perfil...</p>;\r\n    }\r\n\r\n    // Exibe erro de carregamento inicial\r\n    if (error && !dadosUsuarios) {\r\n         return <p style={{ color: 'red' }}>{error}</p>;\r\n    }\r\n\r\n    // Se não houver dados do usuário (mesmo sem erro), exibe mensagem\r\n    if (!dadosUsuarios) {\r\n        return <p>Não foi possível carregar as informações do perfil.</p>;\r\n    }\r\n\r\n    // Formata a data de criação (apenas se existir)\r\n    const dataFormatada = dadosUsuarios.create_at ? new Date(dadosUsuarios.create_at).toLocaleDateString(\"pt-BR\", {\r\n        day: \"numeric\",\r\n        month: \"long\",\r\n        year: \"numeric\",\r\n    }) : 'Data não disponível';\r\n\r\n    return (\r\n        <div>\r\n            {/* Use suas classes CSS como no exemplo original */}\r\n            <div className=\"box-perfil-principal\">\r\n                <div className=\"box-perfil\">\r\n                    <div className=\"box-perfil-foto\">\r\n                        {/* Imagem do Perfil */}\r\n                        <img\r\n                            src={fotoUrl} // Controlado pelo estado fotoUrl\r\n                            alt=\"Foto de perfil\"\r\n                            style={{ width: '100px', height: '100px', borderRadius: '50%', objectFit: 'cover' }}\r\n                            onError={(e) => {\r\n                                // Se a imagem der erro ao carregar (ex: arquivo deletado), volta para a padrão\r\n                                console.warn(`Erro ao carregar imagem: ${fotoUrl}. Voltando para padrão.`);\r\n                                e.target.src = fotoPerfil;\r\n                             }}\r\n                        />\r\n\r\n                        {/* Formulário de Upload */}\r\n                        <form onSubmit={handleEnviarFotoPerfil}>\r\n                            <label htmlFor=\"upload-foto\" className=\"botao-upload-foto\">\r\n                                {uploading ? \"Enviando...\" : \"Selecionar Foto\"}\r\n                            </label>\r\n                            <input\r\n                                id=\"upload-foto\"\r\n                                type=\"file\"\r\n                                accept=\"image/*\" // Aceita qualquer tipo de imagem\r\n                                onChange={handleFotoPerfilChange}\r\n                                style={{ display: 'none' }} // Input fica escondido\r\n                                disabled={uploading} // Desabilita enquanto envia\r\n                            />\r\n                            {/* Botão de Enviar aparece apenas se uma nova foto foi selecionada */}\r\n                            {novaFoto && (\r\n                                <button type=\"submit\" className=\"botao-enviar-foto\" disabled={uploading}>\r\n                                    {uploading ? \"Enviando...\" : \"Enviar Nova Foto\"}\r\n                                </button>\r\n                            )}\r\n                        </form>\r\n                        {/* Exibe erro de upload */}\r\n                        {error && <p style={{ color: 'red', marginTop: '10px' }}>{error}</p>}\r\n                    </div>\r\n\r\n                    {/* Informações do Usuário */}\r\n                    <div className=\"box-perfil-nome\">\r\n                        <h2>{dadosUsuarios.nome}</h2>\r\n                        <p>{dadosUsuarios.sobrenome}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <ul className=\"box-perfil-lista\">\r\n                    <li><p>E-mail: {dadosUsuarios.email}</p></li>\r\n                    <li><p>Idade: {dadosUsuarios.idade ?? \"Não informada\"}</p></li> {/* Usa ?? para fallback */}\r\n                    <li><p>Gênero: {dadosUsuarios.genero}</p></li>\r\n                    <li><p>Membro desde: {dataFormatada}</p></li>\r\n                </ul>\r\n\r\n                <div className=\"box-perfil-button-voltar-editar\">\r\n                    {/* Botão Editar - Usando useNavigate para melhor semântica */}\r\n                    <button onClick={() => navigate(`/EditarUsuarios/${usuarioId}`)} disabled={uploading}>\r\n                        Editar Perfil\r\n                    </button>\r\n                    {/* Se precisar de um Link com estilo de botão: */}\r\n                    {/* <Link to={`/EditarUsuarios/${usuarioId}`} className=\"botao-estilo-link\">Editar Perfil</Link> */}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}