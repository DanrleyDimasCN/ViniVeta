{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danrley\\\\Documents\\\\ViniVeta\\\\UC7-main\\\\frontend\\\\src\\\\Contexts\\\\authContexts.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from 'react';\nimport apiLocal from '../services/api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AutenticadoContexto = /*#__PURE__*/createContext();\nexport default function AuthProvider({\n  children\n}) {\n  _s();\n  const [tokenT, setTokenT] = useState(false);\n  const [token, setToken] = useState('');\n  const [IdUsuario, setIdUsuario] = useState(null); // <- Adicionando o IdUsuario\n\n  const autenticado = !!tokenT;\n  async function verificarToken() {\n    const iToken = localStorage.getItem('@token');\n    if (!iToken) {\n      setTokenT(false);\n      return;\n    }\n    const tokenU = JSON.parse(iToken);\n    setToken(tokenU);\n    try {\n      const resposta = await apiLocal.get('/VerificaToken', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (resposta.data.id) {\n        setTokenT(true);\n        setIdUsuario(resposta.data.id); // <- Salvando o IdUsuario no estado\n        localStorage.setItem('@id', JSON.stringify(resposta.data.id));\n        localStorage.setItem('@nome', JSON.stringify(resposta.data.nome));\n      }\n    } catch (err) {\n      console.error(\"Erro ao verificar token:\", err);\n    }\n  }\n  async function loginEntrada(email, password) {\n    try {\n      const resposta = await apiLocal.post('/LoginUsuarios', {\n        email,\n        password\n      });\n      localStorage.setItem('@id', JSON.stringify(resposta.data.id));\n      localStorage.setItem('@token', JSON.stringify(resposta.data.token));\n      localStorage.setItem('@nome', JSON.stringify(resposta.data.nome));\n      setTokenT(true);\n      setIdUsuario(resposta.data.id); // <- Salvando o IdUsuario no estado\n    } catch (err) {\n      toast.error('Erro de Comunicação');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(AutenticadoContexto.Provider, {\n    value: {\n      autenticado,\n      loginEntrada,\n      verificarToken,\n      token,\n      IdUsuario\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProvider, \"uk+Bg8V5H5BuMwgm7LC7DO/qTZY=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","apiLocal","toast","jsxDEV","_jsxDEV","AutenticadoContexto","AuthProvider","children","_s","tokenT","setTokenT","token","setToken","IdUsuario","setIdUsuario","autenticado","verificarToken","iToken","localStorage","getItem","tokenU","JSON","parse","resposta","get","headers","Authorization","data","id","setItem","stringify","nome","err","console","error","loginEntrada","email","password","post","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Danrley/Documents/ViniVeta/UC7-main/frontend/src/Contexts/authContexts.js"],"sourcesContent":["import { createContext, useState, } from 'react'\r\nimport apiLocal from '../services/api'\r\nimport { toast } from 'react-toastify'\r\n\r\nexport const AutenticadoContexto = createContext()\r\n\r\nexport default function AuthProvider({ children }) {\r\n\r\n    const [tokenT, setTokenT] = useState(false)\r\n    const [token, setToken] = useState('')\r\n    const [IdUsuario, setIdUsuario] = useState(null)  // <- Adicionando o IdUsuario\r\n\r\n    const autenticado = !!tokenT\r\n\r\n    async function verificarToken() {\r\n        const iToken = localStorage.getItem('@token')\r\n        if (!iToken) {\r\n            setTokenT(false)\r\n            return\r\n        }\r\n        const tokenU = JSON.parse(iToken)\r\n        setToken(tokenU)\r\n        try {\r\n            const resposta = await apiLocal.get('/VerificaToken', {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            })\r\n            if (resposta.data.id) {\r\n                setTokenT(true)\r\n                setIdUsuario(resposta.data.id) // <- Salvando o IdUsuario no estado\r\n                localStorage.setItem('@id', JSON.stringify(resposta.data.id))\r\n                localStorage.setItem('@nome', JSON.stringify(resposta.data.nome))\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Erro ao verificar token:\", err)\r\n        }\r\n    }\r\n\r\n    async function loginEntrada(email, password) {\r\n        try {\r\n            const resposta = await apiLocal.post('/LoginUsuarios', {\r\n                email,\r\n                password\r\n            })\r\n            localStorage.setItem('@id', JSON.stringify(resposta.data.id))\r\n            localStorage.setItem('@token', JSON.stringify(resposta.data.token))\r\n            localStorage.setItem('@nome', JSON.stringify(resposta.data.nome))\r\n            setTokenT(true)\r\n            setIdUsuario(resposta.data.id) // <- Salvando o IdUsuario no estado\r\n        } catch (err) {\r\n            toast.error('Erro de Comunicação')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <AutenticadoContexto.Provider value={{ autenticado, loginEntrada, verificarToken, token, IdUsuario }}>\r\n            {children}\r\n        </AutenticadoContexto.Provider>\r\n    )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}