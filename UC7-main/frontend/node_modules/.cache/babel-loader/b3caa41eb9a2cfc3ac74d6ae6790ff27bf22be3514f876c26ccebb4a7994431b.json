{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Danrley\\\\Documents\\\\ViniVeta\\\\UC7-main\\\\frontend\\\\src\\\\Contexts\\\\authContexts.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from 'react';\nimport api from '../services/api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AutenticadoContexto = /*#__PURE__*/createContext();\nexport default function AuthProvider({\n  children\n}) {\n  _s();\n  const [tokenT, setTokenT] = useState(false);\n  const [token, setToken] = useState('');\n  const autenticado = !!tokenT;\n  async function verificarToken() {\n    const iToken = localStorage.getItem('@token');\n    if (!iToken) {\n      setTokenT(false);\n      return;\n    }\n    const tokenU = JSON.parse(iToken);\n    setToken(tokenU);\n    try {\n      const resposta = await apiLocal.get('/VerificaToken', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (resposta.data.id) {\n        setTokenT(true);\n        localStorage.setItem('@id', JSON.stringify(resposta.data.id));\n        localStorage.setItem('@nome', JSON.stringify(resposta.data.nome));\n      }\n    } catch (err) {}\n  }\n  async function loginEntrada(email, password) {\n    try {\n      const resposta = await apiLocal.post('/LoginUsuarios', {\n        email,\n        password\n      });\n      localStorage.setItem('@id', JSON.stringify(resposta.data.id));\n      localStorage.setItem('@token', JSON.stringify(resposta.data.token));\n      localStorage.setItem('@nome', JSON.stringify(resposta.data.nome));\n      setTokenT(true);\n    } catch (err) {\n      toast.error('Erro de Comunicação');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(AutenticadoContexto.Provider, {\n    value: {\n      autenticado,\n      loginEntrada,\n      verificarToken,\n      token\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_s(AuthProvider, \"Ww2vPV8J0vXUraXPhfZQhdQAs2g=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","api","toast","jsxDEV","_jsxDEV","AutenticadoContexto","AuthProvider","children","_s","tokenT","setTokenT","token","setToken","autenticado","verificarToken","iToken","localStorage","getItem","tokenU","JSON","parse","resposta","apiLocal","get","headers","Authorization","data","id","setItem","stringify","nome","err","loginEntrada","email","password","post","error","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Danrley/Documents/ViniVeta/UC7-main/frontend/src/Contexts/authContexts.js"],"sourcesContent":["import { createContext, useState } from 'react'\r\nimport api from '../services/api'\r\nimport { toast } from 'react-toastify'\r\n\r\nexport const AutenticadoContexto = createContext()\r\n\r\nexport default function AuthProvider({ children }) {\r\n\r\n    const [tokenT, setTokenT] = useState(false)\r\n    const [token, setToken] = useState('')\r\n\r\n    const autenticado = !!tokenT\r\n\r\n    async function verificarToken() {\r\n        const iToken = localStorage.getItem('@token')\r\n        if (!iToken) {\r\n            setTokenT(false)\r\n            return\r\n        }\r\n        const tokenU = JSON.parse(iToken)\r\n        setToken(tokenU)\r\n        try {\r\n            const resposta = await apiLocal.get('/VerificaToken', {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            })\r\n            if (resposta.data.id) {\r\n                setTokenT(true)\r\n                localStorage.setItem('@id', JSON.stringify(resposta.data.id))\r\n                localStorage.setItem('@nome', JSON.stringify(resposta.data.nome))\r\n            }\r\n        } catch (err) {\r\n\r\n        }\r\n    }\r\n\r\n    async function loginEntrada(email, password) {\r\n        try {\r\n            const resposta = await apiLocal.post('/LoginUsuarios', {\r\n                email,\r\n                password\r\n            })\r\n            localStorage.setItem('@id', JSON.stringify(resposta.data.id))\r\n            localStorage.setItem('@token', JSON.stringify(resposta.data.token))\r\n            localStorage.setItem('@nome', JSON.stringify(resposta.data.nome))\r\n            setTokenT(true)\r\n            \r\n        } catch (err) {\r\n            toast.error('Erro de Comunicação')\r\n        }\r\n    }\r\n\r\n    \r\n    return (\r\n        <AutenticadoContexto.Provider value={({ autenticado, loginEntrada, verificarToken, token})}>\r\n            {children}\r\n        </AutenticadoContexto.Provider>\r\n    )\r\n\r\n}"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,QAAQ,OAAO;AAC/C,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEtC,OAAO,MAAMC,mBAAmB,gBAAGN,aAAa,CAAC,CAAC;AAElD,eAAe,SAASO,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAE/C,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMa,WAAW,GAAG,CAAC,CAACJ,MAAM;EAE5B,eAAeK,cAAcA,CAAA,EAAG;IAC5B,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAC7C,IAAI,CAACF,MAAM,EAAE;MACTL,SAAS,CAAC,KAAK,CAAC;MAChB;IACJ;IACA,MAAMQ,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,MAAM,CAAC;IACjCH,QAAQ,CAACM,MAAM,CAAC;IAChB,IAAI;MACA,MAAMG,QAAQ,GAAG,MAAMC,QAAQ,CAACC,GAAG,CAAC,gBAAgB,EAAE;QAClDC,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUd,KAAK;QAClC;MACJ,CAAC,CAAC;MACF,IAAIU,QAAQ,CAACK,IAAI,CAACC,EAAE,EAAE;QAClBjB,SAAS,CAAC,IAAI,CAAC;QACfM,YAAY,CAACY,OAAO,CAAC,KAAK,EAAET,IAAI,CAACU,SAAS,CAACR,QAAQ,CAACK,IAAI,CAACC,EAAE,CAAC,CAAC;QAC7DX,YAAY,CAACY,OAAO,CAAC,OAAO,EAAET,IAAI,CAACU,SAAS,CAACR,QAAQ,CAACK,IAAI,CAACI,IAAI,CAAC,CAAC;MACrE;IACJ,CAAC,CAAC,OAAOC,GAAG,EAAE,CAEd;EACJ;EAEA,eAAeC,YAAYA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACzC,IAAI;MACA,MAAMb,QAAQ,GAAG,MAAMC,QAAQ,CAACa,IAAI,CAAC,gBAAgB,EAAE;QACnDF,KAAK;QACLC;MACJ,CAAC,CAAC;MACFlB,YAAY,CAACY,OAAO,CAAC,KAAK,EAAET,IAAI,CAACU,SAAS,CAACR,QAAQ,CAACK,IAAI,CAACC,EAAE,CAAC,CAAC;MAC7DX,YAAY,CAACY,OAAO,CAAC,QAAQ,EAAET,IAAI,CAACU,SAAS,CAACR,QAAQ,CAACK,IAAI,CAACf,KAAK,CAAC,CAAC;MACnEK,YAAY,CAACY,OAAO,CAAC,OAAO,EAAET,IAAI,CAACU,SAAS,CAACR,QAAQ,CAACK,IAAI,CAACI,IAAI,CAAC,CAAC;MACjEpB,SAAS,CAAC,IAAI,CAAC;IAEnB,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACV7B,KAAK,CAACkC,KAAK,CAAC,qBAAqB,CAAC;IACtC;EACJ;EAGA,oBACIhC,OAAA,CAACC,mBAAmB,CAACgC,QAAQ;IAACC,KAAK,EAAG;MAAEzB,WAAW;MAAEmB,YAAY;MAAElB,cAAc;MAAEH;IAAK,CAAG;IAAAJ,QAAA,EACtFA;EAAQ;IAAAgC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACiB,CAAC;AAGvC;AAAClC,EAAA,CAtDuBF,YAAY;AAAAqC,EAAA,GAAZrC,YAAY;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}